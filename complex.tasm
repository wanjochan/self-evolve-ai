# 复杂的TASM测试文件
.section .text

# 常量定义
CONSTANT equ 42
EXIT_CODE equ 0

_start:
    # 函数序言
    push rbp
    mov rbp, rsp
    
    # 使用常量
    mov rax, CONSTANT
    
    # 调用函数
    call test_func
    
    # 函数尾声
    mov rax, EXIT_CODE
    leave
    ret

# 测试函数
test_func:
    push rbp
    mov rbp, rsp
    
    # 简单计算
    xor rax, rax
    mov rax, 10
    add rax, 20
    
    # 返回
    leave
    ret 