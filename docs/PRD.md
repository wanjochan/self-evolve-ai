# Self-Evolve AI é¡¹ç›®è§„åˆ’

## é¡¹ç›®æ„¿æ™¯

èƒ½è‡ªæˆ‘è¿›åŒ–çš„AIç³»ç»Ÿï¼Œé€šè¿‡ä»£ç è‡ªæˆ‘ä¿®æ”¹ã€ç¼–è¯‘å’Œä¼˜åŒ–å®ç°æŒç»­è¿›åŒ–ï¼Œæœ€ç»ˆç›®æ ‡æ˜¯å®ç°å®Œå…¨è‡ªä¸»çš„é€šç”¨æ™ºèƒ½ã€‚

## è¿›åŒ–é˜¶æ®µåˆ’åˆ†
- **Stage 1: å€Ÿç”¨äººç±»ç»éªŒ** - ä»å…¼å®¹C99å¼€å§‹ï¼Œå»ºç«‹åŸºç¡€æŠ€æœ¯æ ˆ
- **Stage 2: æ¨¡å¼è¯†åˆ«è¿›åŒ–** - AIè¯†åˆ«å’Œä¼˜åŒ–ç°æœ‰ä»£ç æ¨¡å¼ ï¼ˆç­‰Stage 1å½»åº•ç¨³å®šåç­‰ä¸»äººé€šçŸ¥æ‰å¼€å§‹ï¼‰
- **Stage 3: æ¶æ„åˆ›æ–°è¿›åŒ–** - AIå‘ç°è¶…è¶Šäººç±»è®¾è®¡çš„æ–°æ¶æ„ï¼ˆç­‰ä¸»äººé€šçŸ¥æ‰å¼€å§‹ï¼‰
- **Stage 4: é€šç”¨æ™ºèƒ½æ¶Œç°** - å®Œå…¨è‡ªä¸»çš„è®¡ç®—æ¨¡å¼åˆ›æ–°ï¼ˆç­‰ä¸»äººé€šçŸ¥æ‰å¼€å§‹ï¼‰

## æ ¸å¿ƒè®¾è®¡

```
Layer 1 Loader: simple_loader  //æ‰§è¡Œå…¥å£ï¼Œæ¶æ„æ£€æµ‹å’Œæ¨¡å—åŠ è½½
    //ä½¿ç”¨æ¨¡å—ç³»ç»ŸåŠ è½½pipelineæ¨¡å—æ‰§è¡ŒASTCç¨‹åº
    return import(â€™vm',arch=None,bits=None).main(program,argv[],env[]) //ç¤ºæ„ä¼ªä»£ç 
Layer 2 Runtime: f'vm_{arch}_{bits}.native'  // .nativeåŸç”Ÿå­—èŠ‚ç æ¨¡å—ï¼Œå…¶ä¸­æœ€é‡è¦æ˜¯vmæ¨¡å—ç”¨äºåŠ è½½astcè¿è¡Œ
    def main(astc_module_name,argv[],env[]):  
        //vm æ¨¡å—åŠ è½½ astc æ¨¡å—ç„¶åè½¬å‘å‚æ•°å’Œç¯å¢ƒå˜é‡
        return vm_import(astc_module_name).main(argv[],env[])  //ç¤ºæ„ä¼ªä»£ç 
Layer 3 Program: {program}.astc //ç”¨æˆ·ç¨‹åºï¼ˆæ¯”å¦‚c99ã€evolver{version}ï¼‰ASTCå­—èŠ‚ç ï¼Œä»¥åå…¼å®¹ASTC-ASMã€ASTC-ES6ç­‰é«˜çº§è¯­è¨€
    c99:
        return c99_compile(c_file_name, argv[])
    evolver0:
        return evolve() //åŸºäºc99ä»–stage1å¼€å§‹è¿›å…¥stage2çš„å¼€å‘,TODO
```

layer-loader:
ä½œä¸ºç»Ÿä¸€å…¥å£ç‚¹,å®ç°æ¶æ„æ— å…³åŠ è½½å™¨
è‡ªåŠ¨æ£€æµ‹å½“å‰ç¡¬ä»¶æ¶æ„å’Œæ“ä½œç³»ç»Ÿ
åŠ¨æ€é€‰æ‹©å’ŒåŠ è½½å¯¹åº”æ¶æ„çš„VMæ¨¡å—
è½¬å‘å‘½ä»¤è¡Œå‚æ•°å’Œç¯å¢ƒå˜é‡è¿˜æœ‰ç»“æœ
æœªæ¥å¯ä»¥å‚è€ƒcosmopolitané¡¹ç›®å®ç°è·¨æ¶æ„çš„ç»Ÿä¸€loader

layer-runtime:
åŸç”Ÿå­—èŠ‚ç æ¨¡å—,é’ˆå¯¹ç‰¹å®šæ¶æ„ arch+bits
åŠ è½½å’Œæ‰§è¡ŒASTCå­—èŠ‚ç ,è½¬å‘å‚æ•°å’Œç¯å¢ƒè¿˜æœ‰ç»“æœ
//é‡ç‚¹æ ¸å¿ƒæ¨¡å—æ¶æ„ (tunecoreé‡æ„å):
  1. module_module    - æ¨¡å—ç®¡ç†å™¨ (æ™ºèƒ½åŠ è½½+ç¬¦å·è§£æ)
  2. layer0_module    - åŸºç¡€åŠŸèƒ½ (memory+utils+std+libdl)
  3. pipeline_module  - ç¼–è¯‘æµæ°´çº¿:
     â”œâ”€â”€ frontend: c2astc (Cä»£ç â†’ASTCå­—èŠ‚ç )
     â”œâ”€â”€ backend: codegen (ASTCå­—èŠ‚ç â†’ASTCæ±‡ç¼–) + astc2native (AOTç¼–è¯‘)
     â””â”€â”€ execution: astc + vm (ASTCå­—èŠ‚ç æ‰§è¡Œ)
  4. compiler_module  - ç¼–è¯‘å™¨é›†æˆ:
     â”œâ”€â”€ jit (å³æ—¶ç¼–è¯‘ï¼ŒASTCå­—èŠ‚ç â†’åŸç”Ÿæœºå™¨ç )
     â””â”€â”€ ffi (å¤–éƒ¨å‡½æ•°æ¥å£ï¼Œç±»ä¼¼libffi)
  5. libc_module      - C99æ ‡å‡†åº“ (ç‹¬ç«‹æ¨¡å—)

layer-program:
ç”¨æˆ·ç¨‹åºçš„ASTCå­—èŠ‚ç è¡¨ç¤º
æ¶æ„æ— å…³çš„ä¸­é—´è¡¨ç¤ºIR
å…ˆå®ç°ASTCå­—èŠ‚ç æ”¯æŒï¼Œæœªæ¥å¯æ‰©å±•æ”¯æŒASTC-ASMã€ASTC-ES6ç­‰é«˜çº§è¯­è¨€

### æ ¸å¿ƒæŠ€æœ¯
- **ASTCå­—èŠ‚ç **: å¯æ‰©å±•çš„è®¡ç®—è¡¨ç¤º (astc.[h|c])
- **.nativeæ¨¡å—**: åŸç”Ÿå­—èŠ‚ç æ¨¡å— {module}_{arch}_{bits}.native (module.[h|c])
- **æ¨¡å—åŒ–æ¶æ„**: 4ä¸ªæ ¸å¿ƒæ¨¡å—æä¾›å®Œæ•´åŠŸèƒ½æ ˆ
  - pipeline_module: c2astc, codegen, astc2native, vmæ‰§è¡Œ
  - compiler_module: jitç¼–è¯‘, ffiæ¥å£
  - layer0_module: åŸºç¡€æœåŠ¡ (å†…å­˜ã€å·¥å…·ã€æ ‡å‡†åº“ã€åŠ¨æ€åŠ è½½)
  - libc_module: C99æ ‡å‡†åº“æ”¯æŒ
- **æŒ‰éœ€åŠ è½½**: Pythoné£æ ¼çš„æ¨¡å—åŠ è½½æœºåˆ¶ load_module("./module")

## 4. æ¨¡å—åŒ–è®¾è®¡è¯¦ç»†è¯´æ˜

### è®¾è®¡ç†å¿µ

- **æ¨¡å—æ•´åˆ**: å°†ç›¸å…³åŠŸèƒ½åˆå¹¶ï¼Œå‡å°‘æ¨¡å—é—´å¤æ‚ä¾èµ–
- **æŒ‰éœ€åŠ è½½**: Pythoné£æ ¼çš„ä¼˜é›…æ¨¡å—åŠ è½½æœºåˆ¶
- **æ™ºèƒ½è§£æ**: è‡ªåŠ¨æ¶æ„æ£€æµ‹å’Œè·¯å¾„è§£æ
- **ç»Ÿä¸€æ¥å£**: æ‰€æœ‰æ¨¡å—éµå¾ªç›¸åŒçš„æ¥å£è§„èŒƒ

### æŒ‰éœ€åŠ è½½æœºåˆ¶

#### æ™ºèƒ½è·¯å¾„è§£æ
```c
// è‡ªåŠ¨è§£æ: "./layer0" -> "./layer0_arm64_64.native"
char* resolved = resolve_native_file("./layer0");
```

#### ä¼˜é›…çš„æ¨¡å—åŠ è½½
```c
// Pythoné£æ ¼çš„æ¨¡å—åŠ è½½
Module* module = load_module("./layer0");
```

#### ç¬¦å·è§£ææ¥å£
```c
// ä¼˜é›…çš„ç¬¦å·è§£æå’Œè°ƒç”¨
void* func = module->sym("function_name");
int result = ((int(*)(int))func)(42);
```

### æ ¸å¿ƒæ¨¡å—æ¥å£

æ¯ä¸ªæ¨¡å—éƒ½å®ç°ä»¥ä¸‹ç»Ÿä¸€æ¥å£ï¼š

```c
typedef struct Module {
    const char* name;           // æ¨¡å—åç§°
    ModuleState state;          // å½“å‰çŠ¶æ€
    const char* error;          // æœ€åé”™è¯¯ä¿¡æ¯

    int (*init)(void);          // åˆå§‹åŒ–æ¨¡å—
    void (*cleanup)(void);      // æ¸…ç†æ¨¡å—
    void* (*resolve)(const char* symbol);  // è§£æç¬¦å·
} Module;
```

### æ ¸å¿ƒæ¨¡å—è¯¦ç»†ä»‹ç»

#### 1. å¢å¼ºçš„æ¨¡å—ç®¡ç†å™¨ (module_module.c)

**ä½œç”¨**: ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—ï¼Œæä¾›æ™ºèƒ½çš„æ¨¡å—åŠ è½½å’Œç®¡ç†åŠŸèƒ½ã€‚

**æ ¸å¿ƒåŠŸèƒ½**:
- **æ™ºèƒ½è·¯å¾„è§£æ**: è‡ªåŠ¨æ·»åŠ æ¶æ„åç¼€
- **æŒ‰éœ€åŠ è½½**: Pythoné£æ ¼çš„æ¨¡å—åŠ è½½
- **ç¬¦å·è§£æ**: ä¼˜é›…çš„å‡½æ•°è°ƒç”¨æ¥å£
- **æ¨¡å—ç¼“å­˜**: é¿å…é‡å¤åŠ è½½
- **ä¾èµ–ç®¡ç†**: è‡ªåŠ¨å¤„ç†æ¨¡å—ä¾èµ–

**å…³é”®API**:
- `resolve_native_file()` - æ™ºèƒ½è·¯å¾„è§£æ
- `load_module()` - æŒ‰éœ€åŠ è½½æ¨¡å—
- `module->sym()` - ç¬¦å·è§£ææ¥å£
- `module_resolve()` - è§£æç¬¦å·
- `module_load()` - ä¼ ç»ŸåŠ è½½æ¥å£

**ç‰¹ç‚¹**:
- æ”¯æŒè‡ªåŠ¨æ¶æ„æ£€æµ‹ (arm64_64, x64_64ç­‰)
- æä¾›Pythoné£æ ¼çš„ä¼˜é›…æ¥å£
- é›†æˆ.nativeæ–‡ä»¶æ ¼å¼éªŒè¯
- æ”¯æŒæ¨¡å—ç”Ÿå‘½å‘¨æœŸç®¡ç†

#### 2. Layer0åŸºç¡€æ¨¡å— (layer0_module.c)

**ä½œç”¨**: æä¾›ç³»ç»ŸåŸºç¡€æœåŠ¡ï¼Œæ•´åˆäº†memory+utils+std+libdlåŠŸèƒ½ã€‚

**æ ¸å¿ƒåŠŸèƒ½**:
- **å†…å­˜ç®¡ç†**: å¤šå†…å­˜æ± ç®¡ç†å’Œç»Ÿè®¡
- **å·¥å…·å‡½æ•°**: æ¶æ„æ£€æµ‹ã€æ–‡ä»¶æ“ä½œã€å­—ç¬¦ä¸²å¤„ç†
- **æ ‡å‡†åº“**: åŸºç¡€Cæ ‡å‡†åº“å‡½æ•°
- **åŠ¨æ€åŠ è½½**: dlopen/dlsym/dlclose/dlerroråŒ…è£…

**å†…å­˜æ± ç±»å‹**:
- `MEMORY_POOL_GENERAL` - é€šç”¨å†…å­˜
- `MEMORY_POOL_BYTECODE` - å­—èŠ‚ç å­˜å‚¨
- `MEMORY_POOL_JIT` - JITç¼–è¯‘ä»£ç 
- `MEMORY_POOL_MODULES` - æ¨¡å—æ•°æ®
- `MEMORY_POOL_TEMP` - ä¸´æ—¶æ•°æ®
- `MEMORY_POOL_C99_*` - C99ç¼–è¯‘å™¨ç›¸å…³å†…å­˜æ± 

**å…³é”®API**:
- `memory_alloc()` - åˆ†é…å†…å­˜
- `memory_free()` - é‡Šæ”¾å†…å­˜
- `detect_architecture()` - æ£€æµ‹æ¶æ„
- `dlopen_wrapper()` - åŠ¨æ€åº“åŠ è½½
- `safe_strncpy()` - å®‰å…¨å­—ç¬¦ä¸²æ“ä½œ

#### 3. Pipelineç¼–è¯‘æµæ°´çº¿æ¨¡å— (pipeline_module.c)

**ä½œç”¨**: æä¾›å®Œæ•´çš„ç¼–è¯‘æ‰§è¡Œæµæ°´çº¿ï¼Œæ•´åˆäº†frontend+backend+executionåŠŸèƒ½ã€‚

**æ ¸å¿ƒåŠŸèƒ½**:
- **Frontend**: Cæºç è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æ (c2astc)
- **Backend**: ASTè½¬æ±‡ç¼–ä»£ç  (codegen) + AOTç¼–è¯‘ (astc2native)
- **Execution**: è™šæ‹Ÿæœºæ‰§è¡ŒASTCå­—èŠ‚ç  (astc + vm)
- **ç»Ÿä¸€æ¥å£**: ç¼–è¯‘å’Œæ‰§è¡Œçš„ä¸€ç«™å¼æœåŠ¡

**æ”¯æŒçš„åŠŸèƒ½**:
- Tokenè¯†åˆ«å’Œè§£æ (frontend)
- ASTæ„å»ºå’ŒéªŒè¯ (frontend)
- ä»£ç ç”Ÿæˆå’Œä¼˜åŒ– (backend)
- ASTCå­—èŠ‚ç è½¬åŸç”Ÿä»£ç  (backend - astc2native)
- è™šæ‹Ÿæœºæ‰§è¡Œç¯å¢ƒ (execution)
- é”™è¯¯å¤„ç†å’Œè¯Šæ–­

**å…³é”®API**:
- `pipeline_compile()` - ç¼–è¯‘Cæºç 
- `pipeline_execute()` - æ‰§è¡Œå­—èŠ‚ç 
- `pipeline_compile_and_run()` - ç¼–è¯‘å¹¶æ‰§è¡Œ
- `pipeline_get_assembly()` - è·å–æ±‡ç¼–ä»£ç 
- `pipeline_get_bytecode()` - è·å–å­—èŠ‚ç 
- `pipeline_astc2native()` - AOTç¼–è¯‘
- `aot_create_compiler()` - åˆ›å»ºAOTç¼–è¯‘å™¨
- `aot_compile_to_executable()` - ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶

#### 4. Compilerç¼–è¯‘å™¨é›†æˆæ¨¡å— (compiler_module.c)

**ä½œç”¨**: æä¾›ç‰¹æ®Šç¼–è¯‘æ–¹å¼çš„é›†æˆï¼Œæ•´åˆäº†jit+ffiåŠŸèƒ½ã€‚

**æ ¸å¿ƒåŠŸèƒ½**:
- **JIT**: è¿è¡Œæ—¶å³æ—¶ç¼–è¯‘ï¼Œæ”¯æŒx86-64æœºå™¨ç ç”Ÿæˆ
- **FFI**: å¤–éƒ¨å‡½æ•°æ¥å£ï¼Œæ”¯æŒåŠ¨æ€åº“åŠ è½½å’Œå‡½æ•°è°ƒç”¨
- **ç»Ÿä¸€æ¥å£**: ç‰¹æ®Šç¼–è¯‘æ¨¡å¼çš„ç»Ÿä¸€ç®¡ç†

**æ”¯æŒçš„ç¼–è¯‘æ¨¡å¼**:
- å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰- è¿è¡Œæ—¶ç”Ÿæˆæœºå™¨ç 
- å¤–éƒ¨å‡½æ•°æ¥å£ï¼ˆFFIï¼‰- è°ƒç”¨å¤–éƒ¨åº“

**å…³é”®API**:
- `compiler_jit_compile()` - JITç¼–è¯‘
- `compiler_ffi_call()` - FFIè°ƒç”¨
- `compiler_create_context()` - åˆ›å»ºç¼–è¯‘ä¸Šä¸‹æ–‡
- `compiler_set_optimization()` - è®¾ç½®ä¼˜åŒ–çº§åˆ«

#### 5. LibCæ ‡å‡†åº“æ¨¡å— (libc_module.c)

**ä½œç”¨**: æä¾›å®Œæ•´çš„C99æ ‡å‡†åº“æ”¯æŒï¼Œä¸ºC99å¼€å‘æä¾›æ ‡å‡†åº“æ›¿ä»£ã€‚

**æ ¸å¿ƒåŠŸèƒ½**:
- **æ–‡ä»¶I/O**: æ–‡ä»¶è¯»å†™ã€æµæ“ä½œ
- **å­—ç¬¦ä¸²å¤„ç†**: å­—ç¬¦ä¸²æ“ä½œã€æ ¼å¼åŒ–
- **æ•°å­¦å‡½æ•°**: æ•°å­¦è¿ç®—ã€ä¸‰è§’å‡½æ•°
- **å†…å­˜ç®¡ç†**: malloc/free/realloc
- **é”™è¯¯å¤„ç†**: errnoã€é”™è¯¯ä¿¡æ¯

**æ”¯æŒçš„C99ç‰¹æ€§**:
- æ ‡å‡†è¾“å…¥è¾“å‡ºï¼ˆstdio.hï¼‰
- å­—ç¬¦ä¸²æ“ä½œï¼ˆstring.hï¼‰
- æ•°å­¦å‡½æ•°ï¼ˆmath.hï¼‰
- å†…å­˜ç®¡ç†ï¼ˆstdlib.hï¼‰
- å­—ç¬¦å¤„ç†ï¼ˆctype.hï¼‰
- æ—¶é—´å¤„ç†ï¼ˆtime.hï¼‰

**å…³é”®API**:
- `libc_printf()` - æ ¼å¼åŒ–è¾“å‡º
- `libc_malloc()` - å†…å­˜åˆ†é…
- `libc_fopen()` - æ–‡ä»¶æ“ä½œ
- `libc_strlen()` - å­—ç¬¦ä¸²é•¿åº¦
- `libc_sin()` - æ•°å­¦å‡½æ•°

### æ¨¡å—ä¾èµ–å…³ç³»

```
module_module (æ ¸å¿ƒç®¡ç†å™¨ï¼Œæ— ä¾èµ–)
    â†“
layer0_module (åŸºç¡€æœåŠ¡å±‚)
    â†“
pipeline_module (ç¼–è¯‘æµæ°´çº¿) â† ä¾èµ– layer0
    â†“
compiler_module (ç¼–è¯‘å™¨é›†æˆ) â† ä¾èµ– layer0
    â†“
libc_module (C99æ ‡å‡†åº“ï¼Œç‹¬ç«‹)
```

### æ¨¡å—åŠ è½½å’Œåˆå§‹åŒ–

#### æŒ‰éœ€åŠ è½½
ä½¿ç”¨æ–°çš„æŒ‰éœ€åŠ è½½æœºåˆ¶ï¼š

```c
// æ™ºèƒ½è·¯å¾„è§£æå’ŒåŠ è½½
Module* layer0 = load_module("./layer0");
Module* pipeline = load_module("./pipeline");
Module* compiler = load_module("./compiler");
```

#### åˆå§‹åŒ–é¡ºåº
1. `module_module` é¦–å…ˆåˆå§‹åŒ–ï¼ˆè‡ªä¸¾ï¼‰
2. `layer0_module` åˆå§‹åŒ–ï¼ˆæä¾›åŸºç¡€æœåŠ¡ï¼‰
3. `pipeline_module` å’Œ `compiler_module` å¹¶è¡Œåˆå§‹åŒ–
4. `libc_module` ç‹¬ç«‹åˆå§‹åŒ–

#### ç¬¦å·è§£æ
ä½¿ç”¨æ–°çš„ä¼˜é›…æ¥å£ï¼š

```c
// è·å–æ¨¡å—å‡½æ•°å¹¶è°ƒç”¨
void* malloc_func = layer0->sym("memory_alloc");
void* ptr = ((void*(*)(size_t))malloc_func)(1024);
```

## 5. å®ç°è·¯çº¿å›¾
stage 1
```
dev roadmap (by human master)
- src/core/                    # our modulized system core layer
- layer 1 loader (windows exe)
- layer 2 native module (vm, libc, std, astc, jit, utils, etc), will be loaded by mmap() 
- layer 3 program (c99 windows 64 x86)
- build tcc with c99 // test c99 working good
- layer 3 program c99 supports cross build
- cross build layer 1 loader (linux, macos)
- cross build layer 2 vm (arm, riscv, mips, etc.)
- build loader2 with c99 (then start to be free from tinycc)
```


stage 2

stage 3

stage 4

## 6. æŠ€æœ¯ç»éªŒæ€»ç»“

- ä¸è¦ä¹±å»ºæ–°æ–‡ä»¶ï¼Œè¦å°½é‡æ”¹æºæ–‡ä»¶

### TCCç¼–è¯‘é¿å…æ€æ¯’è½¯ä»¶è¯¯æŠ¥ç»éªŒ

åœ¨å®ç°PRD.mdä¸‰å±‚æ¶æ„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†TCCç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶è¢«æ€æ¯’è½¯ä»¶è¯¯æŠ¥ä¸ºç—…æ¯’ï¼ˆHEUR/QVM202.0.68C9ï¼‰çš„é—®é¢˜ã€‚ç»è¿‡ç ”ç©¶å’Œå®è·µï¼Œæ‰¾åˆ°äº†æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼š

#### æˆåŠŸçš„ç¼–è¯‘æ–¹æ¡ˆ

**æœ€ç®€å•æœ‰æ•ˆçš„æ–¹æ¡ˆ**ï¼š
```bash
tcc.exe -o loader.exe source.c
```

**ä¿å®ˆæ–¹æ¡ˆ**ï¼ˆå¦‚æœç®€å•æ–¹æ¡ˆä»æœ‰é—®é¢˜ï¼‰ï¼š
```bash
tcc.exe -g -O0 -DLEGITIMATE_SOFTWARE -o loader.exe source.c -luser32 -lkernel32 -ladvapi32
```

---

## âŒ é‡è¦ç¼–è¯‘ç»éªŒå’Œæ•™è®­ âŒ

### ä¸¥ç¦çš„é”™è¯¯åšæ³•ï¼š
1. **ä¸è¦ç”Ÿæˆ.defæ–‡ä»¶** - é¡¹ç›®æ¶æ„ä¸ä½¿ç”¨.defæ–‡ä»¶
2. **ä¸è¦å°†.exeé‡å‘½åä¸º.native** - .nativeæ˜¯è‡ªå®šä¹‰æ ¼å¼ï¼Œä¸æ˜¯é‡å‘½åçš„å¯æ‰§è¡Œæ–‡ä»¶
3. **ä¸è¦ä½¿ç”¨ä¼ ç»Ÿå…±äº«åº“ç¼–è¯‘æ–¹å¼** - æˆ‘ä»¬æœ‰è‡ªå·±çš„nativeæ¨¡å—ç³»ç»Ÿ
4. **âŒâŒâŒ ç»å¯¹ä¸è¦åˆ›å»ºä¸å¿…è¦çš„æ–°æ–‡ä»¶ âŒâŒâŒ** - è¿™æ˜¯é‡å¤çŠ¯çš„ä¸¥é‡é”™è¯¯ï¼
   - ä¸è¦åˆ›å»º *_new.bat, *_clean.bat, *_simple.c ç­‰æ–‡ä»¶
   - ç›´æ¥ä¿®æ”¹ç°æœ‰æ–‡ä»¶ï¼Œä¸è¦åˆ›å»ºå‰¯æœ¬
   - ä½¿ç”¨ç°æœ‰æ¶æ„å’Œå·¥å…·ï¼Œä¸è¦é‡å¤é€ è½®å­

### âœ… æ­£ç¡®çš„.nativeæ¨¡å—åˆ›å»ºæ–¹å¼ï¼š
1. **ä½¿ç”¨src/core/native.cä¸­çš„å‡½æ•°**ï¼š
   - `native_module_create()` - åˆ›å»ºæ¨¡å—ç»“æ„
   - `native_module_set_code()` - è®¾ç½®æœºå™¨ç 
   - `native_module_add_export()` - æ·»åŠ å¯¼å‡ºå‡½æ•°
   - `native_module_write_file()` - å†™å…¥çœŸæ­£çš„.nativeæ ¼å¼ï¼ˆNATVé­”æ•°ï¼‰

2. **éµå¾ªPRD.mdç¬¬76è¡Œ**ï¼šç”¨ module æ¨¡å—æ¥åŠ è½½å…¶å®ƒæ¨¡å—
3. **éµå¾ªPRD.mdç¬¬84è¡Œ**ï¼šsrc/utils.cå®ç°libdl-alike, libffi-alikeåŠŸèƒ½

### ğŸ¯ æ­£ç¡®ç¼–è¯‘æµç¨‹ï¼š
```
æºç  â†’ ç¼–è¯‘ä¸ºç›®æ ‡ä»£ç  â†’ ä½¿ç”¨native.cç³»ç»Ÿåˆ›å»º.nativeæ ¼å¼ â†’ è¾“å‡ºçœŸæ­£çš„.nativeæ–‡ä»¶
```

**é”™è¯¯æµç¨‹**ï¼š
```
æºç  â†’ ç¼–è¯‘ä¸º.exe â†’ é‡å‘½åä¸º.native âŒ
```
