# AI-Assisted Task Plan: Self-Evolve AI

This document outlines the development tasks for the Self-Evolve AI project, based on the PRD and an analysis of the existing codebase. It is generated by the AI assistant to guide the development process.

## 1. Task Plan Diagram

```mermaid
graph TD
    subgraph "Layer 3: Program - å¹³å‡å®Œæˆåº¦: 70%"
        A1["å®Œå–„ c2astc ç¼–è¯‘å™¨<br/>90%"]
        A2["å®Œå–„ C99 æ ‡å‡†åº“è½¬å‘æ¥å£<br/>60%"]
        A3["å»ºç«‹çœŸæ­£çš„è‡ªä¸¾é—­ç¯<br/>25%"]
        A4["ä¿®å¤å‘½ä»¤è¡Œå‚æ•°è§£æ<br/>0%"]
        A5["æµ‹è¯•ç«¯åˆ°ç«¯ç¼–è¯‘æµç¨‹<br/>10%"]
    end

    subgraph "Layer 2: Runtime - å¹³å‡å®Œæˆåº¦: 65%"
        B1["å®Œå–„ astc2rt JIT ç¼–è¯‘å™¨<br/>75%"]
        B2["æ”¯æŒå¤šæ¶æ„åç«¯<br/>45%"]
        B3["å®ç° FFI æ¥å£<br/>50%"]
        B4["ä¼˜åŒ–ä»£ç ç”Ÿæˆè´¨é‡<br/>30%"]
        B5["å®ç°.rtæ–‡ä»¶æ ¼å¼æ ‡å‡†åŒ–<br/>20%"]
    end

    subgraph "Layer 1: Loader - å¹³å‡å®Œæˆåº¦: 55%"
        C1["å®Œå–„åŸºç¡€åŠ è½½å™¨<br/>85%"]
        C2["å®ç°è·¨å¹³å°å•ä¸€åŠ è½½å™¨<br/>20%"]
        C3["å»ºç«‹loaderâ†’runtimeâ†’programè°ƒç”¨é“¾<br/>40%"]
        C4["å®ç°åŠ¨æ€Runtimeé€‰æ‹©<br/>30%"]
    end

    subgraph "è‡ªä¸¾éªŒè¯ä¸ä¿®æ­£ - å¹³å‡å®Œæˆåº¦: 15%"
        D1["éªŒè¯å·¥å…·é“¾å®Œæ•´æ€§<br/>10%"]
        D2["é‡å†™è‡ªä¸¾æ„å»ºè„šæœ¬<br/>5%"]
        D3["å»ºç«‹ç‹¬ç«‹ç¼–è¯‘å¾ªç¯<br/>0%"]
        D4["æ¶ˆé™¤TinyCCä¾èµ–<br/>0%"]
        D5["è‡ªä¸¾åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•<br/>0%"]
    end

    subgraph "AIè¿›åŒ–æ¡†æ¶ - å¹³å‡å®Œæˆåº¦: 5%"
        E1["AIä»£ç åˆ†æå¼•æ“<br/>10%"]
        E2["è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶<br/>0%"]
        E3["è¿›åŒ–ç­–ç•¥ç®—æ³•<br/>0%"]
    end

    A4 --> A1
    A1 --> A5
    A5 --> A3
    A2 --> A3
    B4 --> B1
    B5 --> B2
    B1 --> D1
    B2 --> D1
    C3 --> C1
    C4 --> C2
    C1 --> D1
    A3 --> D2
    D1 --> D2
    D2 --> D3
    D3 --> D4
    D4 --> D5
    D5 --> E1
    E1 --> E2
    E2 --> E3
```

## 2. ç«‹å³å¯æ‰§è¡Œä»»åŠ¡æ¸…å•

### ğŸ”¥ é«˜ä¼˜å…ˆçº§ - æœ¬å‘¨å®Œæˆ

#### 2.1 ä¿®å¤å‘½ä»¤è¡Œå‚æ•°è§£æ (A4 - 0% â†’ 100%)
**é—®é¢˜**: `bin\tool_c2astc.exe --version` æŠ¥é”™ï¼Œå‚æ•°è§£ææœ‰é—®é¢˜
**ä»»åŠ¡**:
- [ ] æ£€æŸ¥`tool_c2astc.c`çš„mainå‡½æ•°å‚æ•°å¤„ç†
- [ ] å®ç°æ ‡å‡†çš„å‘½ä»¤è¡Œé€‰é¡¹æ”¯æŒ (--help, --version, -o)
- [ ] æµ‹è¯•åŸºæœ¬å‘½ä»¤è¡ŒåŠŸèƒ½
- [ ] ä¿®å¤ç¼–ç é—®é¢˜å¯¼è‡´çš„é”™è¯¯ä¿¡æ¯æ˜¾ç¤º

#### 2.2 éªŒè¯å·¥å…·é“¾å®Œæ•´æ€§ (D1 - 10% â†’ 80%)
**ç›®æ ‡**: æµ‹è¯•c2astcâ†’astc2rtâ†’loaderå®Œæ•´æµç¨‹
**ä»»åŠ¡**:
- [ ] åˆ›å»ºç®€å•æµ‹è¯•ç”¨ä¾‹ (`tests/toolchain_test.c`)
- [ ] æµ‹è¯•: `tool_c2astc.exe test.c â†’ test.astc`
- [ ] æµ‹è¯•: `tool_astc2rt.exe test.astc â†’ test_x64_64.rt`  
- [ ] æµ‹è¯•: `enhanced_loader.exe test_x64_64.rt tests/simple_test.astc`
- [ ] è®°å½•æ¯ä¸ªæ­¥éª¤çš„æˆåŠŸ/å¤±è´¥çŠ¶æ€
- [ ] è¯†åˆ«ç¼ºå¤±çš„åŠŸèƒ½å’Œé›†æˆé—®é¢˜

#### 2.3 å»ºç«‹loaderâ†’runtimeâ†’programè°ƒç”¨é“¾ (C3 - 40% â†’ 90%)
**é—®é¢˜**: ä¸‰å±‚æ¶æ„è°ƒç”¨é“¾å¯èƒ½ä¸å®Œæ•´
**ä»»åŠ¡**:
- [ ] éªŒè¯loaderèƒ½æ­£ç¡®åŠ è½½.rtæ–‡ä»¶
- [ ] éªŒè¯runtimeèƒ½æ­£ç¡®æ‰§è¡Œ.astcç¨‹åº
- [ ] æµ‹è¯•å‚æ•°ä¼ é€’å’Œè¿”å›å€¼å¤„ç†
- [ ] å®Œå–„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ä¼ é€’

### ğŸ”¶ ä¸­ä¼˜å…ˆçº§ - ä¸‹å‘¨å®Œæˆ

#### 2.4 é‡å†™è‡ªä¸¾æ„å»ºè„šæœ¬ (D2 - 5% â†’ 100%)
**é—®é¢˜**: ç°æœ‰`build_true_self_hosted.bat`ä»ä¾èµ–TinyCC
**ä»»åŠ¡**:
- [ ] åˆ†æç°æœ‰è„šæœ¬çš„TinyCCä¾èµ–ç‚¹
- [ ] è®¾è®¡æ–°çš„è‡ªä¸¾åºåˆ—ï¼šå·²æœ‰å·¥å…·ç¼–è¯‘è‡ªèº«
- [ ] å®ç°`build_bootstrap_independent.bat`
- [ ] æµ‹è¯•å®Œå…¨ç‹¬ç«‹çš„ç¼–è¯‘å¾ªç¯
- [ ] éªŒè¯ç”Ÿæˆçš„å·¥å…·èƒ½ç¼–è¯‘è‡ªèº«

#### 2.5 å®ç°.rtæ–‡ä»¶æ ¼å¼æ ‡å‡†åŒ– (B5 - 20% â†’ 80%)
**é—®é¢˜**: .rtæ–‡ä»¶æ ¼å¼å¯èƒ½ä¸ç»Ÿä¸€
**ä»»åŠ¡**:
- [ ] å®šä¹‰æ ‡å‡†çš„.rtæ–‡ä»¶å¤´æ ¼å¼
- [ ] å®ç°æ¶æ„æ£€æµ‹å’Œé€‰æ‹©æœºåˆ¶
- [ ] å»ºç«‹.rtæ–‡ä»¶ç‰ˆæœ¬å…¼å®¹æ€§
- [ ] ä¼˜åŒ–.rtæ–‡ä»¶å¤§å°å’ŒåŠ è½½é€Ÿåº¦

#### 2.6 ä¼˜åŒ–ä»£ç ç”Ÿæˆè´¨é‡ (B4 - 30% â†’ 70%)
**ä»»åŠ¡**:
- [ ] åˆ†æå½“å‰JITç”Ÿæˆçš„æœºå™¨ç è´¨é‡
- [ ] å®ç°åŸºæœ¬çš„å¯„å­˜å™¨åˆ†é…ä¼˜åŒ–
- [ ] æ·»åŠ æ­»ä»£ç æ¶ˆé™¤
- [ ] ä¼˜åŒ–å‡½æ•°è°ƒç”¨çº¦å®š

### ğŸ”¹ ä½ä¼˜å…ˆçº§ - åç»­è¿­ä»£

#### 2.7 å»ºç«‹ç‹¬ç«‹ç¼–è¯‘å¾ªç¯ (D3 - 0% â†’ 100%)
**å‰ç½®æ¡ä»¶**: D1, D2å®Œæˆ
**ä»»åŠ¡**:
- [ ] ä½¿ç”¨è‡ªå·±çš„å·¥å…·ç¼–è¯‘`compiler_c2astc.c`
- [ ] ä½¿ç”¨è‡ªå·±çš„å·¥å…·ç¼–è¯‘`compiler_astc2rt.c`
- [ ] ä½¿ç”¨è‡ªå·±çš„å·¥å…·ç¼–è¯‘`core_loader.c`
- [ ] éªŒè¯ç”Ÿæˆçš„æ–°å·¥å…·åŠŸèƒ½å®Œæ•´
- [ ] å®ç°å®Œå…¨è‡ªä¸¾çš„å¾ªç¯éªŒè¯

#### 2.8 æ¶ˆé™¤TinyCCä¾èµ– (D4 - 0% â†’ 100%)
**å‰ç½®æ¡ä»¶**: D3å®Œæˆ
**ä»»åŠ¡**:
- [ ] è¯†åˆ«æ‰€æœ‰è„šæœ¬ä¸­çš„TinyCCè°ƒç”¨
- [ ] æ›¿æ¢ä¸ºè‡ªå·±çš„å·¥å…·è°ƒç”¨
- [ ] ç§»é™¤external/tcc-winç›®å½•ä¾èµ–
- [ ] éªŒè¯ç³»ç»Ÿå®Œå…¨ç‹¬ç«‹è¿è¡Œ

## 3. å…·ä½“æ‰§è¡Œæ­¥éª¤ - æœ¬å‘¨è¡ŒåŠ¨

### ä»Šå¤©ç«‹å³æ‰§è¡Œ:

#### æ­¥éª¤1: ä¿®å¤tool_c2astcå‘½ä»¤è¡Œ (30åˆ†é’Ÿ)
```bash
# æ£€æŸ¥å½“å‰é—®é¢˜
bin\tool_c2astc.exe --help
# é¢„æœŸ: åº”è¯¥æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æŠ¥é”™

# æŸ¥çœ‹æºç 
# ä¿®å¤ src/tool_c2astc.c ä¸­çš„å‚æ•°è§£æ
# é‡æ–°ç¼–è¯‘æµ‹è¯•
```

#### æ­¥éª¤2: åˆ›å»ºå·¥å…·é“¾æµ‹è¯• (1å°æ—¶)
```bash
# åˆ›å»ºç®€å•æµ‹è¯•
echo "int main() { return 42; }" > tests/simple_test.c

# æµ‹è¯•å®Œæ•´æµç¨‹
bin\tool_c2astc.exe tests/simple_test.c -o tests/simple_test.astc
bin\tool_astc2rt.exe tests/simple_test.astc -o tests/simple_test_x64_64.rt
bin\enhanced_loader.exe tests/simple_test_x64_64.rt tests/simple_test.astc
```

#### æ­¥éª¤3: éªŒè¯loaderè°ƒç”¨é“¾ (1å°æ—¶)
```bash
# æ£€æŸ¥loaderæ˜¯å¦æ­£ç¡®è°ƒç”¨runtime
# æ£€æŸ¥runtimeæ˜¯å¦æ­£ç¡®æ‰§è¡Œprogram
# æµ‹è¯•å‚æ•°ä¼ é€’å’Œè¿”å›å€¼
```

### æ˜å¤©æ‰§è¡Œ:

#### æ­¥éª¤4: åˆ†æè‡ªä¸¾è„šæœ¬ä¾èµ– (2å°æ—¶)
- é€è¡Œåˆ†æ`build_true_self_hosted.bat`
- è¯†åˆ«æ¯ä¸ªTinyCCè°ƒç”¨ç‚¹
- è®¾è®¡æ›¿æ¢æ–¹æ¡ˆ

#### æ­¥éª¤5: è®¾è®¡æ–°è‡ªä¸¾åºåˆ— (2å°æ—¶)
- è§„åˆ’ä½¿ç”¨ç°æœ‰å·¥å…·ç¼–è¯‘è‡ªèº«çš„æ­¥éª¤
- å¤„ç†å¾ªç¯ä¾èµ–é—®é¢˜
- è®¾è®¡å¢é‡éªŒè¯æ–¹æ³•

## 4. æˆåŠŸæ ‡å‡†

### çŸ­æœŸç›®æ ‡ (æœ¬å‘¨)
- [ ] tool_c2astcå‘½ä»¤è¡Œå‚æ•°æ­£å¸¸å·¥ä½œ
- [ ] èƒ½å®Œæˆä¸€ä¸ªç®€å•Cç¨‹åºçš„ç«¯åˆ°ç«¯ç¼–è¯‘
- [ ] loaderèƒ½æ­£ç¡®è°ƒç”¨runtimeæ‰§è¡Œprogram

### ä¸­æœŸç›®æ ‡ (2å‘¨å†…)  
- [ ] æ–°çš„è‡ªä¸¾è„šæœ¬å®Œå…¨ä¸ä¾èµ–TinyCC
- [ ] ç³»ç»Ÿèƒ½ä½¿ç”¨è‡ªå·±çš„å·¥å…·ç¼–è¯‘è‡ªèº«
- [ ] ç”Ÿæˆçš„æ–°å·¥å…·åŠŸèƒ½å®Œæ•´

### é•¿æœŸç›®æ ‡ (1ä¸ªæœˆå†…)
- [ ] å®Œå…¨ç‹¬ç«‹çš„è‡ªä¸¾å¾ªç¯å»ºç«‹
- [ ] AIè¿›åŒ–æ¡†æ¶å¼€å§‹è¿è¡Œ
- [ ] ç³»ç»Ÿå¼€å§‹çœŸæ­£çš„è‡ªæˆ‘è¿›åŒ–

## 5. é£é™©ä¸åº”å¯¹

### é«˜é£é™©
- **å·¥å…·é“¾ä¸å®Œæ•´**: å¯èƒ½æŸäº›å…³é”®åŠŸèƒ½ç¼ºå¤±
  - *åº”å¯¹*: é€æ­¥éªŒè¯ï¼ŒåŠæ—¶è¡¥å……ç¼ºå¤±åŠŸèƒ½
- **å¾ªç¯ä¾èµ–**: è‡ªä¸¾è¿‡ç¨‹å¯èƒ½å­˜åœ¨æ­»é”
  - *åº”å¯¹*: è®¾è®¡å¢é‡è‡ªä¸¾ç­–ç•¥

### ä¸­é£é™©  
- **æ€§èƒ½é—®é¢˜**: JITç”Ÿæˆçš„ä»£ç å¯èƒ½æ•ˆç‡ä½
  - *åº”å¯¹*: ä¼˜å…ˆä¿è¯åŠŸèƒ½ï¼Œåç»­ä¼˜åŒ–æ€§èƒ½
- **å…¼å®¹æ€§é—®é¢˜**: ä¸åŒæ¶æ„æ”¯æŒå¯èƒ½ä¸å®Œæ•´
  - *åº”å¯¹*: å…ˆä¸“æ³¨x64ï¼Œå…¶ä»–æ¶æ„åç»­æ·»åŠ  